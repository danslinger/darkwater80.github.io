function parseChatXML(a){var e,b=a.getElementsByTagName("message"),c="",d=document.getElementById("league_chat");e=d?d.getElementsByTagName("TBODY"):document.getElementsByTagName("TBODY");var f=!1,g=a.getElementsByTagName("messages")[0].getAttribute("action");g&&"clear"==g&&(f=!0);var h=e[0].getElementsByTagName("TR"),i=h[1],j=0;if(f)for(;h.length>2;)e[0].deleteRow(1),h=e[0].getElementsByTagName("TR");else{for(var k=0,l=0;l<b.length&&!(k>displayMessages);l++){var m=b[l].getAttribute("id");if(!document.getElementById(m)){var n=b[l].getAttribute("franchise_id"),o=b[l].getAttribute("to");if(null!=o){if("undefined"==typeof franchise_id)continue;if(o!=franchise_id&&n!=franchise_id)continue}var p=b[l].getAttribute("message"),q=b[l].getAttribute("posted"),r=document.createElement("TR");r.setAttribute("id",m),r.setAttribute("title","Posted: "+q);var s=!1;null!=o&&(s=!0);var t=document.createElement("TD"),u=franchiseDatabase["fid_"+n];c="0000"==n?jQuery("#commishIconDIV").html().trim():""!=u.icon?'<img src="'+u.icon+'"class="franchiseicon" title="'+u.name+'" />':u.name,c='<a href="'+window.baseURLDynamic+"/"+window.year+"/options?L="+window.league_id+"&F="+u.id+'&O=01">'+c+"</a>",t.innerHTML=(s?"<b>":"")+c+(s?"</b>":""),r.appendChild(t);var v=document.createElement("TD");v.innerHTML=(s?"<b>":"")+p+(s?"</b>":""),r.appendChild(v),e[0].insertBefore(r,i),"undefined"!=typeof franchise_id&&n!=franchise_id&&j++}k++}h=e[0].getElementsByTagName("TR");for(var l=h.length;l>displayMessages+1;l--)h[l]&&h[l].getAttribute("id")&&e[0].deleteRow(l);h=e[0].getElementsByTagName("TR");for(var l=1;l<h.length;l++)h[l]&&h[l].getAttribute("id")&&"loadingchatdata"==h[l].getAttribute("id")&&e[0].deleteRow(l)}h=e[0].getElementsByTagName("TR");for(var l=1;l<h.length;l++){var w="eventablerow";l%2==1&&(w="oddtablerow"),h[l].setAttribute("className",w),h[l].setAttribute("class",w)}b=null,1==j&&(play_audio_clip("ohoh","chat_audio_clip"),document.getElementById("body_home")||setTimeout("document.chat.chat.focus()",100))}